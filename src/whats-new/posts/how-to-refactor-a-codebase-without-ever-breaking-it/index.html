---
tags: whats-new
layout: whats-new-post.njk
permalink: whats-new/how-to-refactor-a-codebase-without-ever-breaking-it/index.html
summary: At Scale By the Bay 2019 we gave a talk on Unison's unique approach to
  refactoring. This post gives a brief overview of how it works.
featuredImage: /assets/thing10.svg
categories:
  - news
authors:
  - paul-chiusano
date: 2019-11-26T00:00:00.000Z
title: How to refactor a codebase without ever breaking it
---

{% raw %}
<article class="unison-doc"><section><p></p><section><p><span class="span"><span class="word">At</span><a href="https://www.youtube.com/watch?v=IvENPX0MAZ4" class="named-link" rel="noopener" target="_blank"><span class="span"><span class="word">Scale By the Bay this month</span></span></a><span class="word">we gave a talk on Unison's unique approach to refactoring. Unison takes a different approach to refactoring and updating code: rather than modifying definititons in place, which generates lots of (often misleading) compile errors and prevents you from running or writing other code, Unison refactoring is a structured process whereby a new, compiling version of the code is built up incrementally off to the side. We like this process much better and it has significant benefits:</span></span></p><ul><li><span class="span"><span class="word">A Unison codebase is always runnable and never broken, even when in the middle of a refactoring.</span></span></li><li><span class="span"><span class="word">There's no need to "upgrade your whole codebase" just to be able to test out or play with a code change within some smaller context.</span></span></li></ul><p><span class="span"><span class="word">If you're interested in learning more about this, see</span><a href="https://www.youtube.com/watch?v=IvENPX0MAZ4" class="named-link" rel="noopener" target="_blank"><span class="span"><span class="word">the SBTB talk</span></span></a><span class="word">and also check out the newly added</span><span class="group"><span class="join"><a href="/docs/refactoring" class="named-link" rel="noopener" target="_self"><span class="span"><span class="word">docs on refactoring</span></span></a><span class="word">.</span></span></span><span class="word">The documentation goes through a longer worked example.</span></span></p><p><span class="span"><span class="word">One very common refactoring which Unison makes quite easy is updating a pure function to one that uses abilities like</span><span class="group"><span class="join"><span class="rich source inline-code"><code class="inline-code"><span class="word">IO</span></code></span><span class="word">.</span></span></span><span class="word">For those who have used Scala or Haskell, you might have bad memories of tedious refactoring converting pure code to monadic, which involves switching from pure to monadic syntax and updating a bunch of type signatures, often all along an entire dependency chain. It's not very fun. ðŸ˜¬ In Unison, this work just vanishes and ability requirement changes can be propagated automatically. See</span><span class="group"><span class="join"><a href="/docs/refactoring" class="named-link" rel="noopener" target="_self"><span class="span"><span class="word">the docs to learn more about this</span></span></a><span class="word">.</span></span></span></span></p></section></section><div class="tooltips" style="display: none;"></div></article>
{% endraw %}
